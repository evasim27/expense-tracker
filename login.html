<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Expense Tracker</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    .auth-wrap { min-height: 100vh; display: grid; place-items: center; }
    .auth-card { width: 100%; max-width: 380px; }
    .auth-logo { font-weight: 800; font-size: 24px; margin-bottom: 8px; background: linear-gradient(90deg, #7c3aed, #2563eb, #06b6d4, #f97316); -webkit-background-clip: text; background-clip: text; color: transparent; }
  </style>
</head>
<body>
  <div class="auth-wrap">
    <section class="panel auth-card">
      <div class="auth-logo">Expense Tracker</div>
      <h2>Login</h2>
      <form id="login-form" class="form-grid" autocomplete="off">
        <label class="full">
          <span>Username</span>
          <input id="username" required />
        </label>
        <label class="full">
          <span>Password</span>
          <input type="password" id="password" required />
        </label>
        <div class="actions full">
          <button class="btn primary" type="submit">Login</button>
          <a class="btn" href="register.html">Register</a>
        </div>
      </form>
      <div id="error" style="color:#ef4444; margin-top:8px;"></div>
    </section>
  </div>
  <script src="auth.js"></script>
  <script>
    (function(){
      if (Auth.getCurrent()) { location.href = 'index.html'; return; }
      const form = document.getElementById('login-form');
      const err = document.getElementById('error');
      form.addEventListener('submit', async (e)=>{
        e.preventDefault(); err.textContent = '';
        try {
          await Auth.login(document.getElementById('username').value, document.getElementById('password').value);
          location.href = 'index.html';
        } catch(ex){ err.textContent = ex.message; }
      });
    })();
  </script>
</body>
</html>
